<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: xelatex | Amyangfei's Blog]]></title>
  <link href="http://amyangfei.me/blog/categories/xelatex/atom.xml" rel="self"/>
  <link href="http://amyangfei.me/"/>
  <updated>2014-01-20T16:40:46+08:00</updated>
  <id>http://amyangfei.me/</id>
  <author>
    <name><![CDATA[amyangfei]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Making Ebooks of Pro Git]]></title>
    <link href="http://amyangfei.me/2014/01/10/making-progit-ebook/"/>
    <updated>2014-01-10T00:00:00+08:00</updated>
    <id>http://amyangfei.me/2014/01/10/making-progit-ebook</id>
    <content type="html"><![CDATA[<p>Pro Git 是一本用来学习 git 很好的书，从 <a href="https://github.com/progit/progit" target="_blank">progit</a> 这个开源项目可以获得这本书的全部内容，下边介绍在 Ubuntu Server 12.04 环境下制作电子书的过程。</p>

<h2>安装依赖</h2>

<h3>1. ruby, rubygems</h3>

<p>参考 Ruby-China 的 <a href="http://ruby-china.org/wiki/install-rails-on-ubuntu-12-04-server" target="_blank">wiki</a></p>

<h3>2. rdiscount</h3>

<p>markdown 使用的模板，通过 rubygems 安装</p>

<p>```bash</p>

<p>$ gem install rdiscount</p>

<p>```</p>

<h3>3. calibre</h3>

<p><a href="http://en.wikipedia.org/wiki/Calibre_(software)" target="_blank">calibre</a> 是一款开源的电子书管理软件，生成 epub 或 mobi 格式需要安装。</p>

<p>``` bash</p>

<p>$ sudo apt-get install calibre</p>

<p>```</p>

<!-- more -->


<h3>4. pandoc，xelatex</h3>

<p>生成 pdf 格式需要安装这两个依赖，pandoc 安装比较简单，直接apt；安装 xelatex 则需要首先安装 texlive-xetex，然后打上 LaTeX::Driver 补丁（参考了这个网址 <a href="http://ledgersmb.org/faq/xelatex" target="_blank">Frequently Asked Questions &ndash; XeLaTeX</a> ）。</p>

<p>```bash</p>

<p>$ sudo apt-get install pandoc
$ sudo apt-get install texlive-xetex texlive-latex-base texlive-latex-extra
$ sudo apt-get install liblatex-{driver,encode,table}-perl</p>

<p>```</p>

<h3>5. install font</h3>

<p>生成 pdf 时读取 latex/config.yml 中的配置，使用过程中可能会出现一些字体不存在的错误。比如：</p>

<p>``` bash
./makepdf en
en:</p>

<pre><code>    Parsing markdown... done
    Creating main.tex for en... done
    Running XeTeX:
            Pass 1... failed with:
                    ! I can't find file `Helvetica'.
    Consider running this again with --debug.
</code></pre>

<p>```</p>

<p>这个错误的原因是 Ubuntu 系统中 Helvetica 字体名字为 Nimbus Sans L，修改 confi.yml 文件default 节点下的 font 值即可。</p>

<p><code>bash
$ fc-match "Helvetica Neue"    
DejaVuSans.ttf: "DejaVu Sans" "Book"     
$ fc-match "Helvetica"
n019003l.pfb: "Nimbus Sans L" "Regular"
</code></p>

<p>生成中文pdf时同样遇到了中文字体不存在的情况，默认的配置文件使用的是 AR PL UMing CN 和 AR PL UKai CN，直接安装即可。但是我个人感觉 AR PL UMing CN 字体太细瘦，换成了文泉驿微米黑字体，圆润多了。</p>

<p><code>bash
sudo apt-get install ttf-arphic-ukai    # "AR PL UKai" 文鼎PL中楷
sudo apt-get install ttf-arphic-uming   # "AR PL UMing" 文鼎PL细上海宋
sudo apt-get install ttf-wqy-microhei   # "WenQuanYi Micro Hei" 文泉驿微米黑
</code></p>

<h2>make</h2>

<p>最后一步，生成电子书，好书一本，细细品读，Enjoy！</p>

<p><code>bash
$ ./makeebooks en       # 默认生成mobi格式，en英文
$ export FORMAT=epub        # 设置FORMAT为epub，生成epub格式
$ ./makeebooks zh       # 生成epub格式，zh中文
$ ./makepdfs zh         # 生成pdf
</code></p>
]]></content>
  </entry>
  
</feed>

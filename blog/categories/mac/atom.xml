<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Mac | Amyangfei's Blog]]></title>
  <link href="http://amyangfei.me/blog/categories/mac/atom.xml" rel="self"/>
  <link href="http://amyangfei.me/"/>
  <updated>2014-03-11T19:30:50+08:00</updated>
  <id>http://amyangfei.me/</id>
  <author>
    <name><![CDATA[amyangfei]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Running PHP with Nginx on Mac OS X]]></title>
    <link href="http://amyangfei.me/2012/07/22/php-with-nginx-in-macOS/"/>
    <updated>2012-07-22T00:00:00+08:00</updated>
    <id>http://amyangfei.me/2012/07/22/php-with-nginx-in-macOS</id>
    <content type="html"><![CDATA[<p>直接切入正题，关于Mac OS下Nginx的安装部署在<a href="http://amyangfei.me/2012/05/01/install-nginx-for-mac/" target="_blank">mac上安装nginx</a>这篇文章中有详细的叙述。<a href="http://en.wikipedia.org/wiki/FastCGI" target="_blank"> FastCGI </a>是语言无关的、可伸缩架构的CGI开放扩展，其主要行为是将CGI解释器进程保持在内存中并因此获得较高的性能，PHP-CGI是PHP自带的FastCGI管理器。在Mac OS X Lion中系统自带了Apache服务器以及PHP解释器，通过查看phpinfo可以很清楚的看到PHP使用的Server API是Apache2.0 Handler。</p>

<h3>安装PHP</h3>

<p>通过macports安装PHP，安装PHP的同时安装了fastcgi模块，php5-eaccelerator模块用来加速PHP</p>

<p>``` bash
sudo port install php5 +fastcgi fcgi php5-gd php5-mysql php5-sqlite \</p>

<pre><code>    php5-eaccelerator php5-curl php5-iconv
</code></pre>

<p>```</p>

<!-- more -->


<p>安装结束后进入配置php.ini文件。</p>

<p><code>bash
cd /opt/local/etc/php5
sudo cp php.ini-development php.ini
</code></p>

<p>然后打开配置文件php.ini，适当修改时区date.timezone，eaccelerator等配置信息。</p>

<h3>配置Nginx参数</h3>

<p>首先配置nginx.conf文件。在http节点内的提供php服务的server节点内添加配置信息</p>

<p>``` bash
location ~ .php$ {</p>

<pre><code>root           html;
fastcgi_pass   127.0.0.1:9000;
fastcgi_index  index.php;
fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
include        fastcgi.conf;
</code></pre>

<p>}
```</p>

<p>此处注意，在nginx.conf最后一行的默认参数配置是include fastcgi_params，需要修改为include fastcgi.conf，fastcgi.conf为nginx.conf同目录下配置文件，其中有下面一行参数。如果不修改运行时会出现“No input file specified.”的错误。</p>

<p><code>bash
fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
</code></p>

<h3>检查运行</h3>

<p>分别启动nginx和php-cgi</p>

<p><code>bash
--启动Nginx
sudo /usr/local/nginx/sbin/nginx
--启动php-cgi
sudo /opt/local/bin/php-cgi -b 127.0.0.1:9000
</code></p>

<p>创建index.php测试，典型内容&lt;?php phpinfo(); ?>,访问页面 <a href="http://127.0.0.1/index.php">http://127.0.0.1/index.php</a> ，正常访问看到php相关的信息，可以清楚的看到Server API是CGI/FastCGI。</p>

<p>至此，nginx-php基本配置完毕。</p>
]]></content>
  </entry>
  
</feed>
